# GUI Terminal Window Guide

## 概要

LPDDR Test Automation GUIに統合されたターミナルウィンドウ機能について説明します。この機能により、GUIの利便性とターミナルの柔軟性を両方活用できます。

## ターミナルウィンドウの起動

### 基本的な起動方法

1. **GUIアプリケーションを起動**
   ```bash
   python3 lpddr_gui.py
   ```

2. **ターミナルボタンをクリック**
   - メインGUIの制御ボタンフレームにある「ターミナル」ボタンをクリック
   - 新しいターミナルウィンドウが開きます

3. **ターミナルウィンドウの特徴**
   - 黒背景に緑文字のコンソール風デザイン
   - コマンド履歴機能（上下矢印キー）
   - Tab補完機能
   - リアルタイムコマンド実行

## ターミナルウィンドウの機能

### 🖥️ ウィンドウ構成

```
┌─────────────────────────────────────────────────────────────┐
│ LPDDR Terminal                                              │
├─────────────────────────────────────────────────────────────┤
│ ╔══════════════════════════════════════════════════════════╗ │
│ ║                LPDDR Test Automation Terminal           ║ │
│ ║                                                          ║ │
│ ║  Available Commands:                                     ║ │
│ ║    help     - Show help message                          ║ │
│ ║    config   - Configure test parameters                  ║ │
│ ║    connect  - Connect to target board                   ║ │
│ ║    test     - Run test sequence                         ║ │
│ ║    status   - Show current status                       ║ │
│ ║    log      - Show recent logs                          ║ │
│ ║    clear    - Clear terminal                            ║ │
│ ║                                                          ║ │
│ ╚══════════════════════════════════════════════════════════╝ │
│                                                             │
│ [09:15:30] LPDDR> help                                      │
│ help                                                        │
│                                                             │
│ LPDDR Test Automation Commands:                             │
│                                                             │
│ CONFIGURATION:                                              │
│   config show                    - Show current config     │
│   config port <port>             - Set serial port         │
│   config baudrate <rate>         - Set baudrate            │
│   ...                                                       │
├─────────────────────────────────────────────────────────────┤
│ LPDDR> [________________] [送信] [クリア]                    │
└─────────────────────────────────────────────────────────────┘
```

### ⌨️ キーボードショートカット

| キー | 機能 |
|------|------|
| `Enter` | コマンドを実行 |
| `↑` | コマンド履歴を遡る |
| `↓` | コマンド履歴を進む |
| `Tab` | コマンド補完 |
| `Ctrl+C` | 現在の操作をキャンセル |

## 利用可能なコマンド

### 📋 基本コマンド

| コマンド | 説明 | 例 |
|---------|------|-----|
| `help` | ヘルプメッセージを表示 | `help` |
| `clear` | ターミナル出力をクリア | `clear` |
| `history` | コマンド履歴を表示 | `history` |

### ⚙️ 設定コマンド

| コマンド | 説明 | 例 |
|---------|------|-----|
| `config show` | 現在の設定を表示 | `config show` |
| `config port <port>` | シリアルポートを設定 | `config port /dev/ttyUSB0` |
| `config baudrate <rate>` | ボーレートを設定 | `config baudrate 115200` |
| `config timeout <seconds>` | タイムアウトを設定 | `config timeout 30` |
| `config frequencies <freqs>` | テスト周波数を設定 | `config frequencies 800,666` |
| `config patterns <patterns>` | テストパターンを設定 | `config patterns 1,15` |

### 🔌 接続コマンド

| コマンド | 説明 | 例 |
|---------|------|-----|
| `connect` | ターゲットボードに接続 | `connect` |
| `disconnect` | ターゲットボードから切断 | `disconnect` |

### 🧪 テストコマンド

| コマンド | 説明 | 例 |
|---------|------|-----|
| `test` | フルテストシーケンスを実行 | `test` |
| `test freq <frequency>` | 単一周波数テストを実行 | `test freq 800` |
| `test diag` | 診断テストのみを実行 | `test diag` |
| `stop` | 実行中のテストを停止 | `stop` |

### 📊 情報コマンド

| コマンド | 説明 | 例 |
|---------|------|-----|
| `status` | 現在のステータスを表示 | `status` |
| `log [lines]` | ログを表示（デフォルト20行） | `log 50` |

## 使用例

### 基本的なテストフロー

```bash
# 1. ターミナルウィンドウを開く
# GUIの「ターミナル」ボタンをクリック

# 2. 設定の確認・変更
config show
config port /dev/ttyUSB0
config baudrate 115200
config frequencies 800,666
config patterns 1,15

# 3. ターゲットボードに接続
connect

# 4. テスト実行
test

# 5. 結果確認
status
log 30

# 6. 切断
disconnect
```

### 単一テストの実行

```bash
# 特定の周波数でのテスト
test freq 800

# 診断テストのみ
test diag

# テストの停止
stop
```

### 設定の動的変更

```bash
# 現在の設定を確認
config show

# ポートを変更
config port /dev/ttyUSB1

# 周波数を変更
config frequencies 700,666

# 設定を再確認
config show
```

## GUIとの連携

### 🔄 データの同期

ターミナルウィンドウとメインGUIは完全に同期されています：

- **設定の同期**: ターミナルで変更した設定は即座にメインGUIに反映
- **接続状態の同期**: 接続/切断状態が両方のウィンドウで共有
- **テスト状態の同期**: テスト実行状態が両方で表示
- **ログの共有**: 同じログファイルを参照

### 📊 リアルタイム更新

- メインGUIのプログレスバーとステータス表示がリアルタイムで更新
- ターミナルでのコマンド実行結果がメインGUIのログにも表示
- テスト結果が両方のウィンドウで確認可能

## 利点と特徴

### ✅ ターミナルウィンドウの利点

1. **コマンドラインの柔軟性**
   - 複雑なコマンドの組み合わせ
   - スクリプト化可能な操作
   - バッチ処理の実行

2. **リアルタイムフィードバック**
   - コマンド実行結果の即座な確認
   - エラーメッセージの詳細表示
   - デバッグ情報の確認

3. **履歴機能**
   - コマンド履歴の保存
   - 過去のコマンドの再利用
   - 操作の記録

4. **補完機能**
   - Tabキーによるコマンド補完
   - 入力ミスの削減
   - 効率的な操作

### 🎯 使用場面

#### **ターミナルウィンドウが適している場合:**
✅ **詳細なデバッグ作業**  
✅ **複雑な設定変更**  
✅ **バッチ処理の実行**  
✅ **コマンドライン操作に慣れたユーザー**  
✅ **自動化スクリプトの開発**  

#### **メインGUIが適している場合:**
✅ **初回設定**  
✅ **視覚的な操作**  
✅ **リアルタイムでの進捗確認**  
✅ **結果の可視化**  

## トラブルシューティング

### よくある問題と解決方法

#### 1. ターミナルウィンドウが開かない
```bash
# エラーメッセージを確認
# メインGUIのログウィンドウでエラーを確認

# 解決方法:
# - Pythonの依存関係を確認
# - メインGUIを再起動
```

#### 2. コマンドが実行されない
```bash
# 接続状態を確認
status

# 設定を確認
config show

# エラーメッセージを確認
log 20
```

#### 3. 設定が反映されない
```bash
# 設定を再確認
config show

# メインGUIの設定も確認
# 両方のウィンドウで同じ値が表示されることを確認
```

## 高度な使用方法

### スクリプト化

ターミナルウィンドウのコマンドは、スクリプトとして記録・再利用できます：

```bash
# よく使用するコマンドの組み合わせ
config port /dev/ttyUSB0
config baudrate 115200
connect
test
log 50
disconnect
```

### デバッグ作業

```bash
# 詳細なログを確認
log 100

# 接続状態を詳細確認
status

# 設定の詳細確認
config show
```

### バッチ処理

```bash
# 複数の周波数でテスト
test freq 800
# テスト完了を待つ
test freq 666
# 結果を確認
log 50
```

## まとめ

GUI統合ターミナルウィンドウにより、以下の利点が得られます：

🎯 **柔軟性**: コマンドラインの柔軟性とGUIの利便性を両立  
🔄 **同期**: メインGUIとの完全なデータ同期  
📊 **効率性**: リアルタイムでの操作と結果確認  
🛠️ **デバッグ**: 詳細なデバッグ情報の確認  
📝 **記録**: コマンド履歴による操作の記録  

この機能により、LPDDRテスト自動化の作業効率が大幅に向上し、より柔軟で効率的なテスト操作が可能になります。
