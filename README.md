# LPDDR Test Automation Software

AI-CAMKITメインボードのLPDDR4インタフェース検証を自動化するソフトウェアです。

## 機能

- シリアルポート経由でのターゲットボードとの通信
- 自動テスト実行（周波数選択、トレーニング、メモリテスト、診断テスト）
- 結果判定と次ステップ決定
- GUI インターフェース（オプション）
- 設定ファイルによる柔軟な設定

## インストール

```bash
# 依存関係をインストール
pip install -r requirements.txt

# 仮想環境を使用する場合
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# または
venv\Scripts\activate     # Windows
pip install -r requirements.txt
```

## 使用方法

### コマンドライン版

```bash
python lpddr_test_automation.py
```

### GUI版

```bash
python lpddr_gui.py
```

## 設定

`config.yaml` ファイルで設定を変更できます：

- シリアルポート設定
- テスト周波数
- テストパターン
- ログレベル

## テストフロー

1. シリアル接続確立
2. 周波数選択（800MHz → 666MHz）
3. 1Dトレーニング実行
4. メモリテスト実行（パターン01, 15）
5. 診断テスト実行
6. 結果判定とレポート生成

## ファイル構成

- `lpddr_test_automation.py` - メインの自動化スクリプト
- `lpddr_gui.py` - GUI インターフェース
- `config.yaml` - 設定ファイル
- `requirements.txt` - 依存関係
- `README.md` - このファイル

## 実装した機能：

### 1. 完全自動化されたテストシーケンス
- シリアル通信による双方向データ交換
- プロンプト待機と自動応答
- テスト結果の自動解析
- **NEW**: 2Dトレーニング機能
- **NEW**: 電源リセット機能
- **NEW**: 強化されたエラーハンドリング

### 2. インテリジェントな判定ロジック
- PDFの判定基準を完全実装
- 次ステップの自動決定
- 総合的な結果判定
- **NEW**: TX/RXアイパターンテストによる詳細分析
- **NEW**: 構造化ログによる詳細な分析

### 3. 柔軟な設定システム
- YAML設定ファイル
- 周波数・パターンのカスタマイズ
- ログレベル調整
- **NEW**: アイパターンテスト設定
- **NEW**: 電源制御設定
- **NEW**: 設定バリデーション機能

### 4. ユーザーフレンドリーなインターフェース
- GUI版とコマンドライン版
- リアルタイムログ表示
- 結果レポート生成
- **NEW**: アイパターン結果の詳細表示
- **NEW**: プログレスバーとステータス表示
- **NEW**: 結果エクスポート機能

### 5. 新機能詳細

#### TX/RXアイパターンテスト
- 信号品質の詳細分析
- レーン別・ビット別の個別テスト
- 包括的なアイパターン分析

#### 2Dトレーニング
- 高度なメモリ調整機能
- 設定による有効/無効切り替え
- トレーニング結果の自動検証

#### 電源リセット機能
- テスト失敗時の自動復旧
- 電源制御ポート経由の自動制御
- 手動電源リセットのサポート

### 6. 品質向上機能

#### 単体テスト
- 包括的なテストカバレッジ
- モックを使用したテスト
- エラーケースのテスト

#### エラーハンドリング
- カスタム例外クラス
- 詳細なエラーメッセージ
- 適切な例外の伝播

#### 構造化ログ
- JSON形式のログ出力
- ログローテーション
- パフォーマンス監視

#### 設定バリデーション
- 入力値の検証
- 型安全性の確保
- エラーメッセージの改善

## 注意事項

- シリアルポートの権限が必要です（Linux: `sudo usermod -a -G dialout $USER`）
- ターゲットボードが正しく接続されていることを確認してください
- テスト実行中は他のアプリケーションでシリアルポートを使用しないでください
